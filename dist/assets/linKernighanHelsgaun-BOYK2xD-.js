import{c as g}from"./index-CscP1p27.js";function y(e,n){const t=w(e,n,10);let i=[...e],l=!0,f=0;const r=100,o=new Set;for(;l&&f<r;){l=!1,f++;for(let c=0;c<i.length;c++){const s=i[c];if(o.has(s))continue;const a=k(i,c,t,n);if(a.improved){i=a.tour,l=!0,o.clear();break}else o.add(s)}}return i}function w(e,n,t=10){const i=[n,...e],l={};for(const f of i){const r=[];for(const o of i)if(f!==o){const c=g(f,o);r.push({node:o,dist:c})}r.sort((o,c)=>o.dist-c.dist),l[f]=r.slice(0,t).map(o=>o.node)}return l}function k(e,n,t,i){const l=e.length,f=e[n],r=e[(n+1)%l],o=n===0?i:e[n-1],c=g(f,r);for(const s of t[f]){if(s===r||s===o)continue;const a=g(f,s),d=c-a;if(d<=0)continue;const p=e.indexOf(s);if(p===-1)continue;const u=e[(p+1)%l],v=g(s,u);if(d-v+g(r,u)>.001)return{improved:!0,tour:O(e,n,p)};const h=E(e,n,p,d,t);if(h.improved)return h}return{improved:!1,tour:e}}function E(e,n,t,i,l,f){const r=e.length,o=e[t],c=e[(t+1)%r];for(const s of l[o]){if(s===c||e.indexOf(s)===-1)continue;const a=e.indexOf(s),d=e[(a+1)%r],p=g(s,d),u=g(c,s);if(i+p-u>.001){const m=M(e,n,t,a);if(m)return{improved:!0,tour:m}}}return{improved:!1,tour:e}}function O(e,n,t){return e.length,n>t&&([n,t]=[t,n]),[...e.slice(0,n+1),...e.slice(n+1,t+1).reverse(),...e.slice(t+1)]}function M(e,n,t,i){e.length;const l=[n,t,i].sort((u,v)=>u-v),[f,r,o]=l,c=e.slice(0,f+1),s=e.slice(f+1,r+1),a=e.slice(r+1,o+1),d=e.slice(o+1);return[[...c,...a.reverse(),...s,...d],[...c,...s.reverse(),...a.reverse(),...d],[...c,...a,...s.reverse(),...d]][0]}export{y as linKernighanHelsgaun};
